<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Ingeniería Química</title>

<style>
body{
    font-family: "Segoe UI", sans-serif;
    background:#f4f6f8;
    margin:0;
    padding:20px;
}
h1{
    text-align:center;
    color:#2c3e50;
    margin-bottom:25px;
}
.grid{
    display:grid;
    grid-template-columns:repeat(10, minmax(240px,1fr));
    gap:15px;
}
.semester{
    background:#fff;
    border-radius:12px;
    padding:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
}
.semester h2{
    text-align:center;
    font-size:16px;
    color:#34495e;
}
.category{
    font-size:13px;
    font-weight:bold;
    color:#7f8c8d;
    margin:8px 0 4px;
}
.course{
    background:#ecf0f1;
    border-radius:6px;
    padding:6px 8px;
    margin-bottom:6px;
    font-size:13px;
    cursor:pointer;
    transition:0.2s;
    position:relative;
}
.course:hover{transform:scale(1.02);}
.course.approved{
    background:#c8e6c9;
    color:#2e7d32;
    text-decoration:line-through;
}
.course.locked{
    background:#f8d7da;
    color:#721c24;
    cursor:not-allowed;
}
.course.locked::after{
    content:attr(data-tooltip);
    position:absolute;
    bottom:105%;
    left:50%;
    transform:translateX(-50%);
    background:#333;
    color:#fff;
    padding:4px 6px;
    border-radius:4px;
    font-size:11px;
    white-space:nowrap;
    opacity:0;
    pointer-events:none;
}
.course.locked:hover::after{opacity:1;}
</style>
</head>

<body>

<h1>Malla Curricular – Ingeniería Química</h1>
<div class="grid" id="grid"></div>

<script>
const courses={
A:{name:"Principios de química",c:3},
B:{name:"Cálculo diferencial",c:4},
C:{name:"Álgebra lineal",c:4,req:["B"]},
D:{name:"Cálculo integral",c:4,req:["B"]},
E:{name:"Fundamentos de mecánica",c:4,req:["B"]},
LL:{name:"Balance de materia",c:3},
F:{name:"Cálculo en varias variables",c:4,req:["C","D"]},
G:{name:"Termodinámica",c:3,req:["LL"]},
H:{name:"Ecuaciones diferenciales",c:4,req:["C","D"]},
KK:{name:"Fluidos",c:3,req:["E","G"]},
HH:{name:"Termodinámica química",c:3,req:["F","G"]},
J:{name:"Métodos numéricos",c:3,req:["H"]},
K:{name:"Transferencia de calor",c:4,req:["G","H"]},
JJ:{name:"Manejo de sólidos",c:3,req:["KK"]},
L:{name:"Balance de energía y equilibrio químico",c:3,req:["HH"]},
UU:{name:"Ingeniería económica",c:3,req:["D"]},
M:{name:"Transferencia de masa",c:3,req:["H"]},
O:{name:"Operaciones de separación",c:3,req:["M","L"]},
N:{name:"Ingeniería de reacciones químicas",c:3,req:["L"]},
TT:{name:"Control de procesos",c:3,req:["J","N"]},
P:{name:"Diseño de procesos químicos",c:3,req:["L"]}
};

const semesters=[
{title:"Primer semestre",list:["A","B","LL"]},
{title:"Segundo semestre",list:["C","D","E"]},
{title:"Tercer semestre",list:["F","G"]},
{title:"Cuarto semestre",list:["H","KK","HH"]},
{title:"Quinto semestre",list:["J","K","JJ","L"]},
{title:"Sexto semestre",list:["UU","M"]},
{title:"Séptimo semestre",list:["O","N"]},
{title:"Octavo semestre",list:["TT","P"]}
];

let approved=JSON.parse(localStorage.getItem("approvedIQ"))||[];

function save(){
    localStorage.setItem("approvedIQ",JSON.stringify(approved));
}

function canTake(code){
    if(!courses[code].req) return true;
    return courses[code].req.every(r=>approved.includes(r));
}

function tooltip(code){
    return "Falta aprobar: "+courses[code].req
        .filter(r=>!approved.includes(r))
        .map(r=>courses[r].name)
        .join(", ");
}

function toggle(code){
    if(!canTake(code)) return;
    approved.includes(code)
        ? approved=approved.filter(x=>x!==code)
        : approved.push(code);
    save();
    render();
}

function render(){
    const grid=document.getElementById("grid");
    grid.innerHTML="";
    semesters.forEach(s=>{
        const d=document.createElement("div");
        d.className="semester";
        d.innerHTML=`<h2>${s.title}</h2>`;
        s.list.forEach(code=>{
            const c=document.createElement("div");
            c.className="course";
            c.textContent=`${courses[code].name} (${courses[code].c})`;
            if(approved.includes(code)) c.classList.add("approved");
            if(!canTake(code)){
                c.classList.add("locked");
                c.dataset.tooltip=tooltip(code);
            }
            c.onclick=()=>toggle(code);
            d.appendChild(c);
        });
        grid.appendChild(d);
    });
}

render();
</script>

</body>
</html>
